# Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸

## âš ï¸ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð• ÐŸÐ ÐÐ’Ð˜Ð›Ð

### 1. ÐÐ˜ÐšÐžÐ“Ð”Ð Ð½Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð¸ ÑÐµÐºÑ€ÐµÑ‚Ñ‹ Ð² ÐºÐ¾Ð´Ðµ

- âœ… **ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐž**: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· `.env` Ñ„Ð°Ð¹Ð»
- âŒ **ÐÐ•ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐž**: Ð¥Ð°Ñ€Ð´ÐºÐ¾Ð´ Ñ‚Ð¾ÐºÐµÐ½Ð° Ð² ÐºÐ¾Ð´Ðµ: `bot_token = "123456:ABC-DEF..."`

### 2. ÐÐ˜ÐšÐžÐ“Ð”Ð Ð½Ðµ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚ÑŒÑ‚Ðµ `.env` Ñ„Ð°Ð¹Ð»

Ð¤Ð°Ð¹Ð» `.env` ÑƒÐ¶Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² `.gitignore`, Ð½Ð¾ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾:
- `.env` Ð½Ðµ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ git: `git check-ignore .env` Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ `.env`
- ÐŸÑ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð½Ð¾Ð²Ð¾Ð³Ð¾ `.env` Ñ„Ð°Ð¹Ð»Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ `.env.example` ÐºÐ°Ðº ÑˆÐ°Ð±Ð»Ð¾Ð½

### 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð¾Ð¼

ÐŸÐµÑ€ÐµÐ´ ÐºÐ°Ð¶Ð´Ñ‹Ð¼ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð¾Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:
```bash
python scripts/check_secrets.py
```

## ðŸ”’ Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ, ÐµÑÐ»Ð¸ Ñ‚Ð¾ÐºÐµÐ½ Ð±Ñ‹Ð» ÑÐºÐ¾Ð¼Ð¿Ñ€Ð¾Ð¼ÐµÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½

1. **ÐÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ ÑÐ¼ÐµÐ½Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½** Ñ‡ÐµÑ€ÐµÐ· [@BotFather](https://t.me/BotFather):
   ```
   /revoke - Ð¾Ñ‚Ð¾Ð·Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹
   ```

2. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ git** Ð½Ð° Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð°:
   ```bash
   git log --all --full-history -p | grep -i "BOT_TOKEN"
   ```

3. **ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚Ðµ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ git** (ÐµÑÐ»Ð¸ Ñ‚Ð¾ÐºÐµÐ½ Ð±Ñ‹Ð» Ð² Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸):
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ `git-filter-repo` Ð¸Ð»Ð¸ `BFG Repo-Cleaner`
   - Ð˜Ð»Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð±ÐµÐ· Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸

4. **ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð²ÑÐµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹**:
   - BOT_TOKEN
   - WEBHOOK_SECRET
   - ÐŸÐ°Ñ€Ð¾Ð»Ð¸ Ð‘Ð” (ÐµÑÐ»Ð¸ Ð¾Ð½Ð¸ Ð±Ñ‹Ð»Ð¸ Ð² ÐºÐ¾Ð´Ðµ)
   - Ð›ÑŽÐ±Ñ‹Ðµ Ð´Ñ€ÑƒÐ³Ð¸Ðµ API ÐºÐ»ÑŽÑ‡Ð¸

## ðŸ›¡ï¸ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸

### ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð’ÑÐµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð² `.env` Ñ„Ð°Ð¹Ð»Ðµ (ÑÐ¼. `.env.example`):
- `BOT_TOKEN` - Ñ‚Ð¾ÐºÐµÐ½ Telegram Ð±Ð¾Ñ‚Ð°
- `WEBHOOK_SECRET` - ÑÐµÐºÑ€ÐµÑ‚ Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ webhook
- `POSTGRES_DSN` - ÑÑ‚Ñ€Ð¾ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Ð‘Ð”
- `REDIS_URL` - URL Ð´Ð»Ñ Redis

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° .gitignore

Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ `.gitignore` Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚:
- `.env` Ð¸ `.env.*` (ÐºÑ€Ð¾Ð¼Ðµ `.env.example`)
- Ð¤Ð°Ð¹Ð»Ñ‹ Ñ ÑÐµÐºÑ€ÐµÑ‚Ð°Ð¼Ð¸: `*secret*`, `*token*`, `*password*`

### Pre-commit Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

ÐœÐ¾Ð¶Ð½Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ pre-commit hook Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .git/hooks/pre-commit
cat > .git/hooks/pre-commit << 'EOF'
#!/bin/bash
python scripts/check_secrets.py
if [ $? -ne 0 ]; then
    echo "âŒ ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ñ‹ ÑÐµÐºÑ€ÐµÑ‚Ñ‹ Ð² ÐºÐ¾Ð´Ðµ! ÐšÐ¾Ð¼Ð¼Ð¸Ñ‚ Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½."
    exit 1
fi
EOF
chmod +x .git/hooks/pre-commit
```

### GitHub Secrets (Ð´Ð»Ñ CI/CD)

Ð•ÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ GitHub Actions Ð¸Ð»Ð¸ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ CI/CD:
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ (Settings â†’ Secrets)
- ÐÐ• ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð² workflow Ñ„Ð°Ð¹Ð»Ð°Ñ…

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ´ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸ÐµÐ¹

ÐŸÐµÑ€ÐµÐ´ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸ÐµÐ¹ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ:

1. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ `scripts/check_secrets.py`
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð½Ð° Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ:
   - Ð¢Ð¾ÐºÐµÐ½Ð¾Ð² Ð±Ð¾Ñ‚Ð¾Ð²
   - API ÐºÐ»ÑŽÑ‡ÐµÐ¹
   - ÐŸÐ°Ñ€Ð¾Ð»ÐµÐ¹ Ð‘Ð”
   - ÐŸÑ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ñ… ÐºÐ»ÑŽÑ‡ÐµÐ¹ SSH/SSL

3. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
   - `git-secrets` (AWS)
   - `truffleHog` (Ð¿Ð¾Ð¸ÑÐº ÑÐµÐºÑ€ÐµÑ‚Ð¾Ð² Ð² git Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸)
   - `gitleaks`

## ðŸ“ Ð§ÐµÐº-Ð»Ð¸ÑÑ‚ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸

- [ ] `.env` Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² `.gitignore`
- [ ] `.env` Ñ„Ð°Ð¹Ð» Ð½Ðµ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ git
- [ ] Ð’ÑÐµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
- [ ] ÐÐµÑ‚ Ñ…Ð°Ñ€Ð´ÐºÐ¾Ð´Ð° Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² Ð² ÐºÐ¾Ð´Ðµ
- [ ] Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ `check_secrets.py` Ð½Ðµ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼
- [ ] Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ git Ð½Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²
- [ ] Ð’ÑÐµ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð¾Ñ‚Ð¾Ð·Ð²Ð°Ð½Ñ‹ (ÐµÑÐ»Ð¸ Ð±Ñ‹Ð»Ð¸ ÑÐºÐ¾Ð¼Ð¿Ñ€Ð¾Ð¼ÐµÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹)

## ðŸ” Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸

ÐŸÐµÑ€Ð¸Ð¾Ð´Ð¸Ñ‡ÐµÑÐºÐ¸ (Ñ€Ð°Ð· Ð² Ð¼ÐµÑÑÑ† Ð¸Ð»Ð¸ Ð¿Ð¾ÑÐ»Ðµ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ñ… Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹):
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð°
python scripts/check_secrets.py

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸ git
git log --all --full-history -p | grep -E "BOT_TOKEN|password|secret" -i

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚ÐµÐºÑƒÑ‰Ð¸Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
find . -name "*.py" -exec grep -l "BOT_TOKEN.*=" {} \;
```

## ðŸ“ž ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹

Ð•ÑÐ»Ð¸ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶Ð¸Ð»Ð¸ ÑƒÑ‚ÐµÑ‡ÐºÑƒ ÑÐµÐºÑ€ÐµÑ‚Ð¾Ð²:
1. ÐÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ ÑÐ¼ÐµÐ½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð±Ð¾Ñ‚Ð° Ð½Ð° Ð¿Ð¾Ð´Ð¾Ð·Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½ÑƒÑŽ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ
3. Ð Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ñ€Ð¾Ñ‚Ð°Ñ†Ð¸Ð¸ Ð²ÑÐµÑ… ÑÐµÐºÑ€ÐµÑ‚Ð¾Ð²

