# Команды бота для BotFather

В BotFather: **Bot Settings → Edit Bot → Edit Commands** (или отправьте боту `/setcommands`).

---

## 1. Команды по умолчанию (для всех чатов)

Их можно задать как основной список команд (scope: default):

```
start - Приветствие и краткое описание бота
help - Справка по командам
gd_start - Запустить групповое подземелье (только в группе)
engage - Запустить цепочку заданий (при активном подземелье)
gd_engage - То же, что engage
```

---

## 2. Команды только для групп (group/supergroup)

Те же команды, которые имеют смысл в группе, можно дублировать в списке для групп (если в BotFather задаёте отдельный scope для групповых чатов):

```
gd_start - Запустить групповое подземелье
engage - Цепочка заданий (3 задания за 60 сек)
gd_engage - То же, что engage
```

---

## 3. Команды для администратора / отладки (только в тестовых чатах или при GD_DEV_ADMIN_ANY_CHAT)

Доступны при `APP_ENV=testing`, в чатах из `TEST_CHAT_IDS`/`TEST_CHAT_ID`, либо в любом чате для пользователей из `ADMIN_IDS` при `GD_DEV_ADMIN_ANY_CHAT=True`. Для меню бота их можно не добавлять или добавить отдельным блоком «для разработчиков».

| Команда | Уровень | Описание |
|--------|---------|----------|
| `gd_debug` | L1 | Отладочная информация о текущей GD-сессии |
| `gd_logs [n] [filter]` | L1 | Последние n строк логов (filter: public, debug, verbose, internal) |
| `gd_test_start [template_id]` | L2 | Запуск тестового подземелья (без проверок) |
| `gd_complete` | L2 | Мгновенно завершить подземелье с наградами |
| `gd_skip` | L2 | Пропустить текущий этап |
| `gd_hp <1-100>` | L2 | Установить HP монстра в % (например: gd_hp 50) |
| `gd_event <тип>` | L3 | Принудительно вызвать событие (hp_50, hp_10, boss_unique) |
| `gd_sim <N>` | L3 | Имитация N виртуальных игроков (заглушка) |
| `gd_rewards_test` | L3 | Тест расчёта наград без завершения |
| `gd_reset` | L3 | Сброс тестового окружения (заглушка) |
| `gd_env` | L3 | Вывести переменные окружения (без секретов) |
| `gd_snap list` | L4 | Список снапшотов |
| `gd_snap create` | L4 | Создать снапшот |
| `gd_snap restore <id>` | L4 | Восстановить снапшот |
| `gd_snap delete <id>` | L4 | Удалить снапшот |

---

## Одной вставкой для BotFather (основные команды)

Скопируйте в чат с BotFather после `/setcommands` (или при настройке списка команд):

```
start - Приветствие
help - Справка по командам
gd_start - Запустить групповое подземелье (в группе)
engage - Цепочка заданий (при активном подземелье)
gd_engage - Цепочка заданий
```

Команды отладки (gd_debug, gd_logs, gd_test_start и т.д.) в меню обычно не добавляют — они для тестовых чатов и админов.
